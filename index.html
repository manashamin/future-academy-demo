<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Future Academy Admission Form</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f7fb;
      margin: 0;
      padding: 0;
    }
    .container {
      width: 60%;
      margin: 30px auto;
      background: #fff;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0px 4px 10px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #2b3a67;
    }
    label {
      font-weight: bold;
      display: block;
      margin: 12px 0 5px;
    }
    input, select {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
    }
    input[type="radio"] {
      width: auto;
      margin-right: 6px;
    }
    .radio-group {
      margin: 8px 0;
    }
    .section {
      margin-top: 25px;
      padding-top: 15px;
      border-top: 2px solid #eee;
    }
    .subject-marks {
      display: none;
      margin-top: 15px;
    }
    button {
      margin-top: 20px;
      padding: 12px;
      background-color: #2b3a67;
      color: #fff;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      width: 100%;
    }
    button:hover {
      background-color: #1f2a4d;
    }
    #photoField {
      display: none; /* Hidden until Gmail is validated */
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Future Academy Admission Form</h1>
    <form id="admissionForm">

      <!-- Personal Information -->
      <div class="section">
        <h2>Personal Information</h2>

        <label for="fullName">Full Name</label>
        <input type="text" id="fullName" name="fullName" required>

        <label for="dob">Date of Birth</label>
        <input type="date" id="dob" name="dob" required>

        <label>Gender</label>
        <div class="radio-group">
          <input type="radio" id="male" name="gender" value="Male" required> Male
          <input type="radio" id="female" name="gender" value="Female" required> Female
        </div>

        <label for="guardianName">Guardian's Name</label>
        <input type="text" id="guardianName" name="guardianName" required>

        <label for="relationship">Relationship</label>
        <input type="text" id="relationship" name="relationship" required>

        <label for="phone">Phone Number</label>
        <input type="tel" id="phone" name="phone" pattern="^[0-9]{10}$" placeholder="Enter 10-digit number" required>
        
        <label for="email">Email (Gmail only)</label>
        <input type="email" id="email" name="email" pattern="^[a-zA-Z0-9._%+-]+@gmail\.com$" placeholder="example@gmail.com" required>

        <!-- Photo Upload (Hidden until Gmail valid) -->
        <div id="photoField">
          <label for="photo">Upload Passport Photo (JPG, JPEG, PNG, PDF)</label>
          <input type="file" id="photo" name="photo" accept=".jpg,.jpeg,.png,.pdf" required>
        </div>
      </div>

      <!-- Academic Information -->
      <div class="section">
        <h2>Academic Information</h2>

        <!-- 10th -->
        <h3>10th Standard</h3>
        <label for="tenthMarks">Total Marks Obtained</label>
        <input type="number" id="tenthMarks" name="tenthMarks" required>
        <label for="tenthMax">Maximum Marks</label>
        <input type="number" id="tenthMax" name="tenthMax" required>
        <label for="tenthPercentage">Percentage</label>
        <input type="text" id="tenthPercentage" name="tenthPercentage" readonly>

        <!-- 12th -->
        <h3>12th Standard</h3>
        <label for="stream">Select Stream</label>
        <select id="stream" name="stream" required>
          <option value="">-- Select Stream --</option>
          <option value="science-cs">Science (Computer Science)</option>
          <option value="science-bio">Science (Biology + Maths)</option>
          <option value="pure-science">Pure Science (Bio + CS, no Maths)</option>
          <option value="commerce-ca">Commerce (with Computer Application)</option>
          <option value="commerce-bm">Commerce (with Business Maths)</option>
        </select>

        <!-- Subject Marks Section -->
        <div id="subjectMarks" class="subject-marks"></div>

        <label for="twelfthPercentage">Percentage</label>
        <input type="text" id="twelfthPercentage" name="twelfthPercentage" readonly>
      </div>

      <button type="submit">Submit Application</button>
    </form>
  </div>

  <script>
    const tenthMarks = document.getElementById("tenthMarks");
    const tenthMax = document.getElementById("tenthMax");
    const tenthPercentage = document.getElementById("tenthPercentage");

    const streamSelect = document.getElementById("stream");
    const subjectMarksDiv = document.getElementById("subjectMarks");
    const twelfthPercentage = document.getElementById("twelfthPercentage");
    const emailField = document.getElementById("email");
    const photoField = document.getElementById("photoField");

    // Auto calculate 10th %
    function calculateTenth() {
      if (tenthMarks.value && tenthMax.value) {
        let perc = (parseFloat(tenthMarks.value) / parseFloat(tenthMax.value)) * 100;
        tenthPercentage.value = perc.toFixed(2) + "%";
      }
    }
    tenthMarks.addEventListener("input", calculateTenth);
    tenthMax.addEventListener("input", calculateTenth);

    // 12th stream subjects
    const subjects = {
      "science-cs": ["Language", "English", "Physics", "Chemistry", "Mathematics", "Computer Science"],
      "science-bio": ["Language", "English", "Physics", "Chemistry", "Mathematics", "Biology"],
      "pure-science": ["Language", "English", "Physics", "Chemistry", "Computer Science", "Biology"],
      "commerce-ca": ["Language", "English", "Commerce", "Accounts", "Computer Application", "Economics"],
      "commerce-bm": ["Language", "English", "Commerce", "Accounts", "Business Mathematics", "Economics"]
    };

    streamSelect.addEventListener("change", function () {
      subjectMarksDiv.innerHTML = "";
      let stream = streamSelect.value;
      if (subjects[stream]) {
        subjects[stream].forEach(sub => {
          let label = document.createElement("label");
          label.innerText = sub + " Marks";
          let input = document.createElement("input");
          input.type = "number";
          input.name = sub.toLowerCase().replace(" ", "_");
          input.required = true;
          subjectMarksDiv.appendChild(label);
          subjectMarksDiv.appendChild(input);
        });
        subjectMarksDiv.style.display = "block";
      } else {
        subjectMarksDiv.style.display = "none";
      }
    });

    // Auto calculate 12th %
    subjectMarksDiv.addEventListener("input", function () {
      let inputs = subjectMarksDiv.querySelectorAll("input[type='number']");
      let total = 0, count = 0;
      inputs.forEach(input => {
        if (input.value) {
          total += parseFloat(input.value);
          count++;
        }
      });
      if (count === inputs.length) {
        let perc = (total / (count * 100)) * 100; // each subject out of 100
        twelfthPercentage.value = perc.toFixed(2) + "%";
      }
    });

    // Prepend +91 to phone
    const phoneField = document.getElementById("phone");
    phoneField.addEventListener("focus", function () {
      if (!phoneField.value.startsWith("+91")) {
        phoneField.value = "+91";
      }
    });
    phoneField.addEventListener("input", function () {
      if (!phoneField.value.startsWith("+91")) {
        phoneField.value = "+91";
      }
    });

    // Show photo upload only if Gmail is valid
    emailField.addEventListener("input", function () {
      const gmailRegex = /^[a-zA-Z0-9._%+-]+@gmail\.com$/;
      if (gmailRegex.test(emailField.value)) {
        photoField.style.display = "block";
      } else {
        photoField.style.display = "none";
      }
    });

    // Form validation
    document.getElementById("admissionForm").addEventListener("submit", function (e) {
      if (!/^\+91[0-9]{10}$/.test(phoneField.value)) {
        alert("Phone number must be +91 followed by 10 digits.");
        e.preventDefault();
      }
      if (!/^[a-zA-Z0-9._%+-]+@gmail\.com$/.test(emailField.value)) {
        alert("Email must be a valid Gmail address.");
        e.preventDefault();
      }
    });
  </script>
</body>
</html>
